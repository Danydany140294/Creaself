{# templates/panier/_modal_panier.html.twig #}

{# ========== STYLES CSS ========== #}
<link rel="stylesheet" href="{{ asset('css/modal_panier.css') }}">

{# Modal Panier #}
<div id="modalPanier" class="cart-overlay" style="display: none;">
    <div class="cart-modal-container glass-premium">
        
        <!-- Section Gauche : Articles -->
        <section class="cart-items-panel">
            <header class="panel-header">
                <div class="title-group">
                    <h2>
                        <i class="fa-solid fa-basket-shopping"></i>
                        Mon <span class="pink-text italic">Panier</span>
                    </h2>
                    <span class="items-count" id="itemsCount">‚óè 0 Articles</span>
                </div>
                <a href="#" class="back-shop" onclick="closeModalPanier(); return false;">
                    ‚Üê CONTINUER MES ACHATS
                </a>
            </header>

            <div class="items-scroll-list" id="panierContent">
                <div class="loading-panier">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Chargement du panier...</p>
                </div>
            </div>
        </section>

        <!-- Section Droite : R√©sum√© -->
        <aside class="cart-summary-panel">
            <button class="close-modal-btn" onclick="closeModalPanier()">‚úï</button>
            
            <h3>R√âSUM√â</h3>
            
            <div class="shipping-card glass" id="shippingProgress" style="display: none;">
                <p>Livraison Gratuite <span class="remaining-cost" id="remainingCost">0,00 ‚Ç¨ restant</span></p>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%;"></div>
                </div>
                <span class="reward-tag">LIVRAISON OFFERTE D√àS 50,00 ‚Ç¨</span>
            </div>

            <div class="bill-details" id="billDetails">
                <div class="bill-line">
                    <span>Sous-total</span>
                    <span id="subtotalValue">0,00 ‚Ç¨</span>
                </div>
                <div class="bill-line">
                    <span>Livraison</span>
                    <span id="shippingValue">4,90 ‚Ç¨</span>
                </div>
                <div class="bill-line">
                    <span>TVA estim√©e</span>
                    <span id="taxValue">0,00 ‚Ç¨</span>
                </div>
            </div>

            <div class="total-section">
                <span class="total-label">TOTAL</span>
                <span class="total-value" id="totalValue">0,00 ‚Ç¨</span>
            </div>

            <a href="{{ path('app_panier_index') }}" class="checkout-btn-neon">
                VOIR LE PANIER COMPLET
                <span class="arrow">‚Üí</span>
            </a>

            <div class="payment-icons">
                <span>üí≥</span><span>üì±</span><span>üÖøÔ∏è</span><span>üîí</span>
            </div>
        </aside>
    </div>
</div>

{# ========== JAVASCRIPT ========== #}
<script>
    // ‚ö†Ô∏è Configuration des chemins corrig√©e
    window.PANIER_PATHS = {
        uploadsBase: '{{ asset('asset/images/') }}',  // ‚Üê CHANG√â ICI
        imagesBase: '{{ asset('images/') }}',
        apiBase: '{{ path('app_panier_api') }}'.replace('/api/panier', '')
    };
    
    console.log('üîß Configuration PANIER_PATHS:', window.PANIER_PATHS);
</script>
<script src="{{ asset('js/modal_panier.js') }}"></script>
